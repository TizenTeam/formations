<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="author" content="Arnaud Tournier - @ltearno - LTE Consulting - 2017 - Toulouse"><title>Struts 2</title><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui" name="viewport"><link href="reveal.js/css/reveal.css" rel="stylesheet"><link rel="stylesheet" href="reveal.js/css/theme/white.css" id="theme"><link href="reveal.js/lib/css/zenburn.css" rel="stylesheet"><script>document.write( '<link rel="stylesheet" href="reveal.js/css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );</script></head><body><div class="reveal"><div class="slides"><section><h1>Struts 2</h1><p><small>Arnaud Tournier - @ltearno - LTE Consulting - 2017 - Toulouse</small></p></section><section id="_arnaud_tournier"><h2>Arnaud Tournier</h2><div class="paragraph"><p>Email: <a href="mailto:ltearno@gmail.com">ltearno@gmail.com</a></p></div>
<div class="paragraph"><p>Twitter: <a href="https://twitter.com/ltearno">@ltearno</a></p></div>
<div class="paragraph"><p>Web: <a href="http://www.lteconsulting.fr">www.lteconsulting.fr</a></p></div>
<div class="paragraph"><p><strong>LTE Consulting</strong> société de Développement, Conseil et Formation.</p></div>
<div class="paragraph"><p>Speaker à Java One (San Francisco), Devoxx (France), GDG, JUG, GWTCon (Allemagne, Italie)&#8230;&#8203;</p></div></section>
<section><section id="_struts_2"><h2>Struts 2</h2><div class="paragraph"><p>Framework complétant <em>Java EE</em> au niveau de la couche Web.</p></div><div class="paragraph"><p>Apporte une implémentation <em>MVC</em> de la couche <em>Servlet</em>.</p></div><div class="ulist"><ul><li><p>Version 1 : 2000,</p></li><li><p>Version 2 : 2015, mélange de Struts 1 et WebWork.</p></li></ul></div><div class="paragraph"><p><a href="http://struts.apache.org/">Site officiel</a>, <a href="https://struts.apache.org/docs/home.html">Documentation</a>.</p></div></section><section id="_philosophie"><h2>Philosophie</h2><div class="paragraph"><p>Le framework force l&#8217;utilisation du pattern MVC afin de faciliter le développement au sein d&#8217;équipes de développeurs conséquentes.</p></div>
<div class="paragraph"><p>Une servet unique de gestion est fournie par Struts : le contrôleur.</p></div>
<div class="paragraph"><p>Ce controleur prend en charge toutes les requêtes HTTP entrantes et décide quelle action à exécuter.</p></div>
<div class="paragraph"><p>L&#8217;action, écrite par le développeur, produit son effet et redirige le framework vers une vue à montrer à l&#8217;utilisateur (souvent écrite en JSP).</p></div></section><section id="_philosophie_2"><h2>Philosophie</h2><div class="paragraph"><p>La vie d&#8217;un serveur Struts est donc perpétuel cycle de :</p></div>
<div class="ulist"><ul><li><p>entrée requête HTTP,</p></li><li><p>exécution d&#8217;une action,</p></li><li><p>redirection vers une vue.</p></li></ul></div></section><section id="_traitement_d_une_requête"><h2>Traitement d&#8217;une requête</h2><div class="paragraph"><p>Toutes les requêtes sont traités par le dispatcher Struts (<code>org.apache.struts2.dispatcher.FilterDispatcher</code>).</p></div>
<div class="ulist"><ul><li><p><em>namespace</em> et nom d&#8217;action dans <code>struts.xml</code> sont comparés à l&#8217;url.</p></li><li><p>la classe de l&#8217;action correspondante est instanciée.</p></li><li><p>les paramètres de la requête sont affectés par les setters <code>setNomParametre(valeur)</code>.</p></li><li><p>la méthode <code>execute()</code> est appelée.</p></li><li><p>cette méthode doit renvoyer une <em>clé de navigation</em>.</p></li><li><p>la JSP correspondant à la clé de navigation est exécutée.</p></li></ul></div>
<div class="paragraph"><p>La méthode <code>execute()</code> peut effectuer des traitements métier, consulter la base de données, modifier les données des portées <em>application</em> et <em>session</em>.</p></div>
<div class="paragraph"><p>La JSP à accès au contexte de l&#8217;instance de l&#8217;action, de la session et de la portée applicative.</p></div></section><section id="_configuration"><h2>Configuration</h2><div class="paragraph"><p>La configuration de Struts se fait dans le fichier <code>struts.xml</code>. Il est aussi possible d&#8217;établir la configuration grace à des annotations dans le code.</p></div>
<div class="paragraph"><p>Exemple :</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="xml language-xml">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
        "http://struts.apache.org/dtds/struts-2.3.dtd"&gt;
&lt;struts&gt;
    &lt;constant name="struts.enable.DynamicMethodInvocation" value="false"/&gt;
    &lt;constant name="struts.devMode" value="true"/&gt;

    &lt;include file="example.xml"/&gt;

    &lt;package name="default" namespace="/" extends="struts-default"&gt;
        &lt;default-action-ref name="index"/&gt;

        &lt;action name="index"&gt; <b>(1)</b>
            &lt;result&gt;/index.jsp&lt;/result&gt;
        &lt;/action&gt;
    &lt;/package&gt;
&lt;/struts&gt;</code></pre></div></div>
<div class="colist arabic"><ol><li><p>L&#8217;action est appelée grâce à l&#8217;URL <em>NAMESPACE / NAME.action</em>, donc pour ici <code>/index.action</code>.</p></li></ol></div></section><section id="_configuration_du_dispatcher"><h2>Configuration du dispatcher</h2><div class="paragraph"><p>Les URL Struts sont de la forme <em><a href="http://&#8230;&#8203;/rep1/rep2/&#8230;&#8203;/Action.action" class="bare">http://&#8230;&#8203;/rep1/rep2/&#8230;&#8203;/Action.action</a></em>.</p></div>
<div class="paragraph"><p>La partie <code>rep1/rep2/&#8230;&#8203;/Action.action</code> doit être définie dans le fichier struts.xml ainsi :</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code>&lt;package name="actions" namespace="/actions" extends="struts-default"&gt;
  &lt;action name="HelloWorld" class="fr.lteconsulting.training.struts.example.HelloWorld"&gt;
      &lt;result&gt;/example/HelloWorld.jsp&lt;/result&gt;
  &lt;/action&gt;

  &lt;action name="Action1" class="actions.Action1"&gt;
    &lt;result name="page1"&gt;/vues/Page1.jsp&lt;/result&gt;
    &lt;result name="page2"&gt;/vues/Page2.jsp&lt;/result&gt;
  &lt;/action&gt;

  &lt;action name="Login_*" method="{1}" class="fr.lteconsulting.training.struts.example.Login"&gt;
      &lt;result name="input"&gt;/example/Login.jsp&lt;/result&gt;
      &lt;result type="redirectAction"&gt;Menu&lt;/result&gt;
  &lt;/action&gt;

  &lt;action name="index"&gt;
      &lt;result type="redirectAction"&gt;
          &lt;param name="actionName"&gt;HelloWorld&lt;/param&gt;
          &lt;param name="namespace"&gt;/example&lt;/param&gt;
      &lt;/result&gt;
  &lt;/action&gt;
&lt;/package&gt;</code></pre></div></div></section><section id="_l_interface_code_action_code"><h2>L&#8217;interface <code>Action</code></h2><div class="paragraph"><p>Struts définit l&#8217;interface <code>Action</code> pour aider le développement :</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code>package com.opensymphony.xwork2;

public interface Action {
    String SUCCESS = "success";
    String NONE = "none";
    String ERROR = "error";
    String INPUT = "input";
    String LOGIN = "login";

    String execute() throws Exception;
}</code></pre></div></div></section><section id="_la_classe_code_actionsupport_code"><h2>La classe <code>ActionSupport</code></h2><div class="paragraph"><p>C&#8217;est la classe de base à hériter pour implémenter des actions dans Struts.</p></div>
<div class="paragraph"><p>Voci un exemple :</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code>package fr.lteconsulting.training.struts.example;

import com.opensymphony.xwork2.Action;
import com.opensymphony.xwork2.ActionSupport;

public class AvengersAction extends ActionSupport
{
  // appelé par Struts
  public String execute() {
    // production de la clé de navigation
    // Action.SUCCESS est une constante de l'interface `Action`
    return Action.SUCCESS;
  }
}</code></pre></div></div></section><section id="_récupération_des_paramètres_de_requête"><h2>Récupération des paramètres de requête</h2><div class="paragraph"><p>Les paramètres de requête sont passés sous forme de String avant l&#8217;appel à <code>execute(&#8230;&#8203;)</code>.</p></div>
<div class="paragraph"><p>Voici un exemple de traitement du paramètre <code>nom</code> :</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code>public class Avengers extends ActionSupport implements SessionAware
{
  private String nom;

  public void setNom( String nom ) {
    this.nom = nom;
  }

  public void execute() { ... }
}</code></pre></div></div></section><section id="_utilisation_de_la_session"><h2>Utilisation de la session</h2><div class="paragraph"><p>La session utilisateur (au sens Java eE) est accessible par injection.</p></div>
<div class="paragraph"><p>La classe action doit implémenter <code>SessionAware</code> qui contient la méthode <code>setSession(&#8230;&#8203;)</code>.</p></div>
<div class="paragraph"><p>L&#8217;appel à la méthode <code>setSession(&#8230;&#8203;)</code> est fait par Struts, avant de déclencher <code>execute()</code>.</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code>public class AvengersAction extends ActionSupport implements SessionAware
{
  // appelé par Struts
  @Override
  public void setSession( Map&lt;String, Object&gt; map ) {
    ...
  }

  public String execute() {
    ...
  }
}</code></pre></div></div></section><section id="_les_résultats_d_action"><h2>Les résultats d&#8217;action</h2><div class="paragraph"><p>Dans le fichier de configuration <code>struts.xml</code>, les noeuds <code>result</code> peuvent indiquer plusieurs comportements :</p></div>
<div class="ulist"><ul><li><p>le dispatch de la requête vers une JSP :</p></li></ul></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code>&lt;action name="Action1" class="actions.Action1"&gt;
  &lt;result name="page1"&gt;/vues/Page1.jsp&lt;/result&gt;
  &lt;result name="page2"&gt;/vues/Page2.jsp&lt;/result&gt;
&lt;/action&gt;</code></pre></div></div>
<div class="ulist"><ul><li><p>un redirection vers une autre action :</p></li></ul></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code>&lt;action name="index"&gt;
    &lt;result name="menu" type="redirectAction"&gt;Menu&lt;/result&gt;
    &lt;result type="redirectAction"&gt;
        &lt;param name="actionName"&gt;HelloWorld&lt;/param&gt;
        &lt;param name="namespace"&gt;/example&lt;/param&gt;
    &lt;/result&gt;
&lt;/action&gt;</code></pre></div></div></section></section>
<section id="_tp"><h2>TP !</h2></section>
<section><section id="_result_type"><h2>Result type</h2><div class="paragraph"><p>Il est possible de définir ses propres types de résultats, qui seront gérés chacuns par leur propre classe.</p></div><div class="paragraph"><p>En fait Struts fait ceci dans son fichier de configuration par défaut :</p></div><div class="listingblock"><div class="content"><pre class="highlight"><code>&lt;result-types&gt;
    &lt;result-type name="chain" class="com.opensymphony.xwork2.ActionChainResult"/&gt;

    &lt;!-- Constatez que c'est le type de résultat par DEFAUT ! --&gt;
    &lt;result-type name="dispatcher" class="org.apache.struts2.result.ServletDispatcherResult" default="true"/&gt;

    &lt;result-type name="freemarker" class="org.apache.struts2.views.freemarker.FreemarkerResult"/&gt;
    &lt;result-type name="httpheader" class="org.apache.struts2.result.HttpHeaderResult"/&gt;
    &lt;result-type name="redirect" class="org.apache.struts2.result.ServletRedirectResult"/&gt;
    &lt;result-type name="redirectAction" class="org.apache.struts2.result.ServletActionRedirectResult"/&gt;
    &lt;result-type name="stream" class="org.apache.struts2.result.StreamResult"/&gt;
    &lt;result-type name="velocity" class="org.apache.struts2.result.VelocityResult"/&gt;
    &lt;result-type name="xslt" class="org.apache.struts2.views.xslt.XSLTResult"/&gt;
    &lt;result-type name="plainText" class="org.apache.struts2.result.PlainTextResult" /&gt;
    &lt;result-type name="postback" class="org.apache.struts2.result.PostbackResult" /&gt;
&lt;/result-types&gt;</code></pre></div></div><div class="paragraph"><p>La documentation des <code>result-types</code> est disponible <a href="https://struts.apache.org/docs/result-types.html">ici</a>.</p></div></section><section id="_passage_de_paramètres"><h2>Passage de paramètres</h2><div class="paragraph"><p>Il est possible de passer des informations à l&#8217;instance de la classe <code>Result</code> qui est invoquée.</p></div>
<div class="paragraph"><p>Exemple :</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code>&lt;package name="passingRequestParameters" extends="struts-default" namespace="/passingRequestParameters"&gt;
  &lt;!-- Pass parameters (reportType, width and height) --&gt;
  &lt;!--
  The redirectAction url generated will be :
  /genReport/generateReport.action?reportType=pie&amp;amp;width=100&amp;amp;height=100#summary
  --&gt;
  &lt;action name="gatherReportInfo" class="..."&gt;
    &lt;result name="showReportResult" type="redirectAction"&gt;
      &lt;param name="actionName"&gt;generateReport&lt;/param&gt;
      &lt;param name="namespace"&gt;/genReport&lt;/param&gt;
      &lt;param name="reportType"&gt;pie&lt;/param&gt;
      &lt;param name="width"&gt;100&lt;/param&gt;
      &lt;param name="height"&gt;100&lt;/param&gt;
      &lt;param name="empty"&gt;&lt;/param&gt;
      &lt;param name="suppressEmptyParameters"&gt;true&lt;/param&gt;
      &lt;param name="anchor"&gt;summary&lt;/param&gt;
    &lt;/result&gt;
  &lt;/action&gt;
&lt;/package&gt;</code></pre></div></div></section><section id="_passage_de_paramètres_2"><h2>Passage de paramètres</h2><div class="paragraph"><p>Il est même possible de passer des paramètres à un <code>result</code> avec des valeurs fournies par l&#8217;action (grâce au getter approprié).</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code>&lt;action name="creation" class="fr.lteconsulting.training.struts.actions.Creation"&gt;
    &lt;result type="redirectAction"&gt;
        &lt;param name="actionName"&gt;edition&lt;/param&gt;
        &lt;param name="id"&gt;${createdMarvelId}&lt;/param&gt; <b>(1)</b>
    &lt;/result&gt;
&lt;/action&gt;</code></pre></div></div>
<div class="colist arabic"><ol><li><p>Le paramètre <code>id</code> du résultat est valorisé avec la valeur retournée par la méthode <code>getCreatedMarvelId()</code> dans la classe d&#8217;action.</p></li></ol></div>
<div class="paragraph"><p>Dans la classe d&#8217;action, on a :</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code>public String getCreatedMarvelId()
{
  return createdMarvelId;
}</code></pre></div></div></section><section id="_résultats_globaux"><h2>Résultats globaux</h2><div class="paragraph"><p>Il est possible de définir des traitement de résultat (avec leur clé de navigation associée) au niveau de la configration d&#8217;un package.</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code>&lt;package&gt;
  &lt;global-results&gt;
    &lt;result name="login" type="redirect"&gt;/login.action&lt;/result&gt;
  &lt;/global-results&gt;
&lt;/package&gt;</code></pre></div></div></section></section>
<section id="_servletactioncontext"><h2>ServletActionContext</h2><div class="listingblock"><div class="content"><pre class="highlight"><code class="java language-java">ServletActionContext context = ServletActionContext.getContext();

context.getActionInvocation();

// contexte applicatif
Map&lt;String, Object&gt; appContext = context.getApplication();

// contexte de session
Map&lt;String, Object&gt; session = context.getSession();

// parametres de la requête
Map&lt;String, Object&gt; parameters = context.getParameters();

// stack EL (OGNL)
ValueStack elStack = context.getValueStack();

// HttpServletRequest et HttpServletResponse
context.getRequest();
context.getResponse();

// contexte Servlet
ServletContext sc = context.getServletContext();

// container ioc
Container container = context.getContainer();

// nom de l'action courante
String actionName = context.getName();</code></pre></div></div></section>
<section><section id="_intercepteurs"><h2>Intercepteurs</h2><div class="paragraph"><p>Parfois on veut appliquer un traitement identique avant ou après le traitement des actions.</p></div><div class="paragraph"><p>Les <em>Intercepteurs</em> sont destinés à cette utilisation.</p></div><div class="paragraph"><p>La chaine de traitement d&#8217;une requête est donc en fait une pile d&#8217;intercepteurs et d&#8217;une action.</p></div></section><section id="_vue_d_ensemble"><h2>Vue d&#8217;ensemble</h2><div class="imageblock" style=""><div class="content"><img src="images-struts/overview.png" alt="overview"></div></div></section><section id="_configuration_2"><h2>Configuration</h2><div class="listingblock"><div class="content"><pre class="highlight"><code>&lt;package name="default" extends="struts-default"&gt;
   &lt;interceptors&gt;
        &lt;interceptor name="timer" class="..."/&gt;
        &lt;interceptor name="logger" class="..."/&gt;
        &lt;interceptor-stack name="myStack"&gt;
           &lt;interceptor-ref name="timer"/&gt;
           &lt;interceptor-ref name="logger"/&gt;
        &lt;/interceptor-stack&gt;
    &lt;/interceptors&gt;

   &lt;action name="login" class="tutuorial.Login"&gt;
         &lt;interceptor-ref name="myStack"/&gt;
         &lt;result name="input"&gt;login.jsp&lt;/result&gt;
         &lt;result name="success" type="redirectAction"&gt;/secure/home&lt;/result&gt;
   &lt;/action&gt;
&lt;/package&gt;</code></pre></div></div>
<div class="paragraph"><p>Les intercepteurs sont exécutés dans l&#8217;ordre de leur déclaration dans le fichier <code>struts.xml</code>.</p></div>
<div class="paragraph"><p>Ici : <code>timer</code> &#8594; <code>logger</code> &#8594; <code>action</code> &#8594; <code>logger</code> &#8594; <code>timer</code>.</p></div></section><section id="_configuration_par_défaut"><h2>Configuration par défaut</h2><div class="paragraph"><p>Struts inclu par défaut de nombreux intercepteurs.</p></div>
<div class="paragraph"><p>On trouve le contenu du fichier <code>struts-default.xml</code> <a href="https://struts.apache.org/docs/interceptors.html#Interceptors-TheDefaultConfiguration">ici</a>.</p></div></section><section id="_exemple_logger"><h2>Exemple : Logger</h2><div class="paragraph"><p>Cet intercepteur, fourni par Struts (et déclaré dans le fichier de configuration racine de Struts), émet un message dans la console à chaque requête.</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="xml language-xml">&lt;action name="someAction" class="com.examples.SomeAction"&gt;
    &lt;interceptor-ref name="completeStack"/&gt;
    &lt;interceptor-ref name="logger"/&gt;
    &lt;result name="success"&gt;good_result.ftl&lt;/result&gt;
&lt;/action&gt;</code></pre></div></div></section><section id="_cas_typique_ajouter_un_intercepteur_à_la_pile_par_défaut"><h2>Cas typique : ajouter un intercepteur à la pile par défaut</h2><div class="listingblock"><div class="content"><pre class="highlight"><code>&lt;package name="user" namespace="/" extends="struts-default"&gt;
  &lt;interceptors&gt;
    &lt;interceptor name="authentication" class="fr.lteconsulting.interceptors.AuthenticationInterceptor"&gt;&lt;/interceptor&gt;
    &lt;interceptor-stack name="authStack"&gt;
      &lt;interceptor-ref name="authentication"&gt;&lt;/interceptor-ref&gt;
      &lt;interceptor-ref name="defaultStack"&gt;&lt;/interceptor-ref&gt;
    &lt;/interceptor-stack&gt;
  &lt;/interceptors&gt;

  &lt;default-interceptor-ref name="authStack"&gt;&lt;/default-interceptor-ref&gt;
&lt;/package&gt;</code></pre></div></div></section><section id="_ecrire_son_intercepteur"><h2>Ecrire son intercepteur</h2><div class="paragraph"><p>Il est bien évidemment possible de fournir ses propres intercepteurs.</p></div>
<div class="paragraph"><p><strong>Attention</strong> il faut être <em>thread-safe</em> car un intercepteur est partagé par les différentes actions.</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code>public interface Interceptor extends Serializable {
  void init();
  String intercept(ActionInvocation invocation) throws Exception;
  void destroy();
}</code></pre></div></div></section><section id="_actioninvocation"><h2>ActionInvocation</h2><div class="paragraph"><p>Lorsqu&#8217;une action est interceptée, la méthode <code>intercept(&#8230;&#8203;)</code> est appelée.</p></div>
<div class="paragraph"><p>L&#8217;objet <code>invocation</code> passé en paramètre encapsule l&#8217;action et la pile d&#8217;intercepteurs restante.</p></div>
<div class="paragraph"><p>Ceci est un exemple du pattern <em>chaîne de responsabilité</em>.</p></div>
<div class="paragraph"><p>L&#8217;intercepteur peut alors :</p></div>
<div class="ulist"><ul><li><p>retourner une chaine de caractère correspondant à un <code>global result</code>. A ce moment là la suite du traitement normal de l&#8217;action n&#8217;est pas effectué. Et la vue associée au résultat retournée est produite.</p></li><li><p>déclencher le traitement suivant dans la pile d&#8217;invocation en appelant la méthode <code>invocation.invoke()</code>. Le traitement suivant peut être un autre intercepteur ou bien l&#8217;action en elle-même.</p></li></ul></div></section><section id="_exemple"><h2>Exemple</h2><div class="paragraph"><p>Voici un exemple d&#8217;intercepteur qui rejete les requêtes au hasard :</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="java language-java">public class RandomErrorInterceptor extends AbstractInterceptor
{
	private static final Logger LOG = LoggerFactory.getLogger( RandomErrorInterceptor.class );

	public String intercept( ActionInvocation invocation ) throws Exception
	{
		if( Math.random() &gt;= 0.5 )
		{
			LOG.error( "L'intercepteur a mis la requête en erreur !" );
			return Action.ERROR;
		}

		// invocation.getInvocationContext().getSession().put( "clé", value );

		// L'appel à invoke peut ou pas déclencher la génération du flux HTML
		return invocation.invoke();
	}
}</code></pre></div></div></section><section id="_configuration_3"><h2>Configuration</h2><div class="paragraph"><p>Et voici la configuration correpondante dans <code>struts.xml</code> :</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code>&lt;package name="default" namespace="/" extends="struts-default"&gt;
    &lt;interceptors&gt;
        &lt;interceptor name="random" class="fr.lteconsulting.interceptors.RandomErrorInterceptor"&gt;&lt;/interceptor&gt; <b>(1)</b>
        &lt;interceptor-stack name="myStack"&gt; <b>(2)</b>
            &lt;interceptor-ref name="random"&gt;&lt;/interceptor-ref&gt;
            &lt;interceptor-ref name="defaultStack"&gt;&lt;/interceptor-ref&gt;
        &lt;/interceptor-stack&gt;
    &lt;/interceptors&gt;

    &lt;default-interceptor-ref name="myStack"&gt;&lt;/default-interceptor-ref&gt; <b>(3)</b>

    &lt;global-results&gt;
        &lt;result name="error"&gt;/WEB-INF/Error.jsp&lt;/result&gt; <b>(4)</b>
    &lt;/global-results&gt;

    &lt;action name="consultation" class="fr.lteconsulting.training.struts.actions.Consultation"&gt; <b>(5)</b>
        &lt;result name="success"&gt;/WEB-INF/Consultation.jsp&lt;/result&gt;
    &lt;/action&gt;
&lt;/package&gt;</code></pre></div></div>
<div class="colist arabic"><ol><li><p>Enregistrement de l&#8217;intercepteur.</p></li><li><p>Déclaration d&#8217;une pile d&#8217;intercepteurs.</p></li><li><p>Utilisation de la pile d&#8217;intercepteurs définie comme pile par défaut.</p></li><li><p>Définition générale du résultat "erreur".</p></li><li><p>Si l&#8217;action renvoie la clée "erreur", le résultat global sera utilisé.</p></li></ol></div></section></section></div></div><script src="reveal.js/lib/js/head.min.js"></script><script src="reveal.js/js/reveal.js"></script><script>// See https://github.com/hakimel/reveal.js#configuration for a full list of configuration options
Reveal.initialize({
  // Display controls in the bottom right corner
  controls: true,
  // Display a presentation progress bar
  progress: true,
  // Display the page number of the current slide
  slideNumber: true,
  // Push each slide change to the browser history
  history: true,
  // Enable keyboard shortcuts for navigation
  keyboard: true,
  // Enable the slide overview mode
  overview: true,
  // Vertical centering of slides
  center: true,
  // Enables touch navigation on devices with touch input
  touch: true,
  // Loop the presentation
  loop: false,
  // Change the presentation direction to be RTL
  rtl: false,
  // Turns fragments on and off globally
  fragments: true,
  // Flags if the presentation is running in an embedded mode,
  // i.e. contained within a limited portion of the screen
  embedded: false,
  // Number of milliseconds between automatically proceeding to the
  // next slide, disabled when set to 0, this value can be overwritten
  // by using a data-autoslide attribute on your slides
  autoSlide: 0,
  // Stop auto-sliding after user input
  autoSlideStoppable: true,
  // Enable slide navigation via mouse wheel
  mouseWheel: true,
  // Hides the address bar on mobile devices
  hideAddressBar: true,
  // Opens links in an iframe preview overlay
  previewLinks: false,
  // Theme (e.g., beige, black, league, night, serif, simple, sky, solarized, white)
  // NOTE setting the theme in the config no longer works in reveal.js 3.x
  //theme: Reveal.getQueryHash().theme || 'white',
  // Transition style (e.g., none, fade, slide, convex, concave, zoom)
  transition: Reveal.getQueryHash().transition || 'slide',
  // Transition speed (e.g., default, fast, slow)
  transitionSpeed: 'fast',
  // Transition style for full page slide backgrounds (e.g., none, fade, slide, convex, concave, zoom)
  backgroundTransition: 'fade',
  // Number of slides away from the current that are visible
  viewDistance: 3,
  // Parallax background image (e.g., "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'")
  parallaxBackgroundImage: '',
  // Parallax background size in CSS syntax (e.g., "2100px 900px")
  parallaxBackgroundSize: '',

  // The "normal" size of the presentation, aspect ratio will be preserved
  // when the presentation is scaled to fit different resolutions. Can be
  // specified using percentage units.
  width: 1600,
  height: 1200,

  // Factor of the display size that should remain empty around the content
  margin: 0.1,

  // Bounds for smallest/largest possible scale to apply to content
  minScale: 0.2,
  maxScale: 1.5,

  // Optional libraries used to extend on reveal.js
  dependencies: [
      { src: 'reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
      { src: 'reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
      { src: 'reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
      { src: 'reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
  ]
});</script></body></html>